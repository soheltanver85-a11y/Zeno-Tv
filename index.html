<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Standard TV Layout</title>

    <link href="https://vjs.zencdn.net/7.20.3/video-js.css" rel="stylesheet"/>
    <script src="https://vjs.zencdn.net/7.20.3/video.min.js"></script>

    <style>
        body {
            margin: 0;
            background: #000;
            overflow: hidden;
            height: 100vh;
        }

        /* Safe Zone Container - এটিই মূল সমাধান */
        #safe-zone {
            position: absolute;
            top: 5%; bottom: 8%; /* নিচ থেকে ৮% উপরে তুলে রাখা হয়েছে */
            left: 5%; right: 5%;
            z-index: 10;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            pointer-events: none;
        }

        /* কার্ডের সারি */
        .channel-row {
            display: flex;
            gap: 20px;
            overflow-x: auto;
            padding: 20px 0;
            pointer-events: auto;
        }
        .channel-row::-webkit-scrollbar { display: none; }

        .card {
            flex: 0 0 260px;
            height: 150px;
            background: rgba(40, 40, 40, 0.95);
            border: 4px solid transparent;
            border-radius: 15px;
            text-align: center;
            outline: none;
            transition: 0.3s;
        }

        .card:focus {
            transform: scale(1.1);
            border-color: #ff0000;
            background: #1a1a1a;
        }

        .card img { width: 60%; height: 50%; object-fit: contain; margin-top: 15px; }
        .card div { font-size: 20px; color: white; margin-top: 10px; font-weight: bold; }

        #player-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }
        .video-js { width: 100% !important; height: 100% !important; }
    </style>
</head>
<body>

<div id="player-container">
    <video id="player" class="video-js vjs-default-skin" autoplay muted playsinline></video>
</div>

<div id="safe-zone">
    <div style="color: #fff; font-size: 28px; font-weight: bold; margin-bottom: 10px;">লাইভ চ্যানেল</div>
    <div class="channel-row" id="list"></div>
</div>

<script>
    const m3uUrl = "https://raw.githubusercontent.com/soheltanver85-a11y/Live-tv2/refs/heads/main/Live-tv2";
    const player = videojs('player');

    async function init() {
        const res = await fetch(m3uUrl);
        const text = await res.text();
        const lines = text.split('\n');
        const list = document.getElementById('list');

        for (let i = 0; i < lines.length; i++) {
            if (lines[i].includes("#EXTINF")) {
                const name = lines[i].split(',')[1] || "Channel";
                const logo = lines[i].match(/tvg-logo="([^"]+)"/)?.[1] || "";
                const url = lines[i+1]?.trim();
                
                const card = document.createElement('div');
                card.className = 'card';
                card.tabIndex = 0;
                card.innerHTML = `<img src="${logo}"><div>${name}</div>`;
                
                card.onfocus = () => {
                    player.src({ src: url, type: 'application/x-mpegURL' });
                    card.scrollIntoView({ behavior: 'smooth', inline: 'center' });
                };
                list.appendChild(card);
            }
        }
        setTimeout(() => document.querySelector('.card').focus(), 1000);
    }

    document.addEventListener('keydown', (e) => {
        const active = document.activeElement;
        if (e.key === "ArrowRight") active.nextElementSibling?.focus();
        if (e.key === "ArrowLeft") active.previousElementSibling?.focus();
    });

    init();
</script>
</body>
</html>
